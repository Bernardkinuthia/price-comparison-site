<!DOCTYPE html>
<html lang="en">
<head>
    <title>Generator Prices</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Comparison of generators on Amazon, sorted by price per watt">
    
    <style>
        body {
            font-family: sans-serif;
            font-size: 10pt;
            margin: 0;
        }

        ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        li {
            line-height: 1.5em;
        }

        table, td, tr, th {
            border: 0;
        }

        th {
            text-align: left;
            padding-right: 3em;
        }

        tr {
            line-height: 1.2em;
        }

        td {
            vertical-align: top;
            white-space: nowrap;
        }

        td.name {
            white-space: normal;
        }

        th {
            padding-right: 0.75em;
        }

        fieldset {
            width: 10em;
            margin: 0;
            margin-bottom: 0.5em;
            border: 1px solid black;
        }

        label {
            display: block;
        }

        #filters {
            position: fixed;
            left: 0;
            top: 0;
            width: 12em;
            height: 100vh;
            overflow-y: auto;
            padding: 0.5em;
            background-color: #f9f9f9;
            border-right: 1px solid #ddd;
        }

        #filters .capacity label {
            display: inline-block;
            width: 4em;
        }

        #filters .capacity input {
            display: inline-block;
            width: 3.5em;
        }

        legend {
            font-weight: bold;
            padding-left: 0;
        }

        td input {
            width: 3em;
        }

        td select {
            width: 10em;
        }

        .hidden {
            display: none;
        }

        .active {
            text-decoration: none;
            color: #000;
            font-weight: bold;
        }

        #main-content {
            margin-left: 13em;
            padding: 0.5em;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 8px;
        }

        th {
            background-color: #f2f2f2;
            vertical-align: middle;
            line-height: 1.3;
        }

        th:nth-child(2), td:nth-child(2) {
            width: 70px;
            min-width: 70px;
        }

        th:nth-child(3), td:nth-child(3) {
            width: 50px;
            min-width: 50px;
        }

        th:nth-child(4), td:nth-child(4) {
            width: 50px;
            min-width: 50px;
        }

        th:nth-child(8), td:nth-child(8) {
            width: 650px;
            min-width: 600px;
        }

        .filtered-out {
            display: none;
        }

        #links a {
            color: #0066cc;
            text-decoration: none;
            display: block;
            padding: 4px 0;
        }

        #links a:hover {
            color: #004499;
            text-decoration: underline;
        }

        #links li {
            margin-bottom: 8px;
        }

        /* Responsive Design */
        @media screen and (max-width: 768px) {
            #filters {
                position: relative;
                width: 100%;
                height: auto;
                padding: 10px;
                margin-bottom: 20px;
                border-right: none;
                border-bottom: 1px solid #ddd;
            }
            
            #affiliate-disclosure {
                margin-left: 10px;
            }
            
            #main-content {
                margin-left: 0;
                padding: 10px;
            }
            
            .table-wrapper {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }
            
            table {
                min-width: 800px;
                font-size: 12px;
            }
            
            th, td {
                padding: 6px 4px;
                white-space: nowrap;
            }
            
            th:nth-child(8), td:nth-child(8) {
                width: 300px;
                min-width: 250px;
                white-space: normal;
            }
            
            #filters {
                display: flex;
                flex-wrap: wrap;
                gap: 10px;
            }
            
            #filters fieldset {
                width: auto;
                min-width: 150px;
                flex: 1;
            }
            
            #filters fieldset.last {
                width: 100%;
                flex-basis: 100%;
            }
        }

        @media screen and (max-width: 480px) {
            body {
                font-size: 9pt;
            }
            
            table {
                font-size: 10px;
            }
            
            th, td {
                padding: 4px 2px;
            }
            
            #filters fieldset {
                min-width: 120px;
            }
            
            th:nth-child(8), td:nth-child(8) {
                width: 200px;
                min-width: 180px;
            }
        }
    </style>
</head>
<body>
    <div id="affiliate-disclosure" style="
        background-color: #fff3cd; 
        border: 1px solid #ffeaa7; 
        padding: 10px 15px; 
        margin-left: 14em; 
        margin-right: 10px;
        margin-top: 10px;
        margin-bottom: 15px;
        border-radius: 5px; 
        font-size: 13px;
        line-height: 1.4;
        position: relative;
        z-index: 10;
    ">
        <strong>⚠️ Affiliate Disclosure:</strong> This website contains affiliate links. As an Amazon Associate, I earn from qualifying purchases at no additional cost to you. This means if you click on a link and make a purchase, I may receive a small commission. All prices and product information are accurate as of the last update and subject to change. I only recommend products I believe will be valuable to you.
    </div>
    
    <div id="filters">
        <fieldset class="condition">
            <legend>Condition</legend>
            <label><input type="checkbox" data-condition="new" checked="">New</label>
            <label><input type="checkbox" data-condition="used" checked="">Used</label>
        </fieldset>
        
        <fieldset class="wattage">
            <legend>Output Wattage</legend>
            <input type="number" id="wattage_min" size="2" min="0" placeholder="W">
            <label for="wattage_min">Minimum</label>
            <input type="number" id="wattage_max" size="2" min="0" placeholder="W">
            <label for="wattage_max">Maximum</label>
        </fieldset>
        
        <fieldset class="capacity">
            <legend>Battery Capacity (Wh)</legend>
            <input type="number" id="capacity_min" size="2" min="0" placeholder="Wh">
            <label for="capacity_min">Minimum</label>
            <input type="number" id="capacity_max" size="2" min="0" placeholder="Wh">
            <label for="capacity_max">Maximum</label>
        </fieldset>
        
        <fieldset class="category">
            <legend>
                <label><input type="checkbox" data-category="generator" checked="">Generators</label>
            </legend>
            
            <div class="product_type">
                <label><input type="checkbox" class="filter" data-category="generator" data-product-type="small_wattage" checked="">Small (0-500W)</label>
            </div>
            
            <div class="product_type">
                <label><input type="checkbox" class="filter" data-category="generator" data-product-type="medium_wattage" checked="">Medium (501-1500W)</label>
            </div>
            
            <div class="product_type">
                <label><input type="checkbox" class="filter" data-category="generator" data-product-type="large_wattage" checked="">Large (1501W+)</label>
            </div>
        </fieldset>
        
        <fieldset class="fuel_type">
            <legend>Fuel Type</legend>
            <label><input type="checkbox" data-fuel-type="gasoline" checked="">Gasoline</label>
            <label><input type="checkbox" data-fuel-type="diesel" checked="">Diesel</label>
            <label><input type="checkbox" data-fuel-type="propane" checked="">Propane</label>
            <label><input type="checkbox" data-fuel-type="dual_fuel" checked="">Dual Fuel</label>
            <label><input type="checkbox" data-fuel-type="tri_fuel" checked="">Tri Fuel</label>
            <label><input type="checkbox" data-fuel-type="solar" checked="">Solar</label>
            <label><input type="checkbox" data-fuel-type="battery" checked="">Battery</label>
        </fieldset>
        
        <fieldset class="engine_type">
            <legend>Engine Type</legend>
            <label><input type="checkbox" data-engine-type="2_stroke" checked="">2 Stroke</label>
            <label><input type="checkbox" data-engine-type="4_stroke" checked="">4 Stroke</label>
            <label><input type="checkbox" data-engine-type="electric" checked="">Electric</label>
        </fieldset>
        
        <fieldset class="brand">
            <legend>Popular Brands</legend>
            <label><input type="checkbox" data-brand="honda" checked="">Honda</label>
            <label><input type="checkbox" data-brand="yamaha" checked="">Yamaha</label>
            <label><input type="checkbox" data-brand="generac" checked="">Generac</label>
            <label><input type="checkbox" data-brand="champion" checked="">Champion</label>
            <label><input type="checkbox" data-brand="westinghouse" checked="">Westinghouse</label>
            <label><input type="checkbox" data-brand="zerokor" checked="">ZeroKor</label>
            <label><input type="checkbox" data-brand="ef_ecoflow" checked="">EF Ecoflow</label>
            <label><input type="checkbox" data-brand="bulleti" checked="">Bulleti</label>
            <label><input type="checkbox" data-brand="jackery" checked="">Jackery</label>
            <label><input type="checkbox" data-brand="anker" checked="">Anker</label>
            <label><input type="checkbox" data-brand="marbero" checked="">MARBERO</label>
            <label><input type="checkbox" data-brand="oupes" checked="">OUPES</label>
            <label><input type="checkbox" data-brand="grecell" checked="">GRECELL</label>
            <label><input type="checkbox" data-brand="allwei" checked="">ALLWEI</label>
            <label><input type="checkbox" data-brand="allpowers" checked="">ALLPOWERS</label>
            <label><input type="checkbox" data-brand="pecron" checked="">Pecron</label>
            <label><input type="checkbox" data-brand="other_brand" checked="">Other Brands</label>
        </fieldset>
        
        <fieldset id="links">
            <legend>Site Pages</legend>
            <ul>
                <li><a href="/faq.html">FAQ</a></li>
                <li><a href="/privacy-policy.html">Privacy Policy</a></li>
                <li><a href="/terms-of-service.html">Terms of Use</a></li>
                <li><a href="/amazon-affiliate-disclosure.html">Amazon Affiliate Disclosure</a></li>
                <li><a href="/contact.html">Contact Us</a></li>
                <li><a href="/about-us.html">About Us</a></li>
            </ul>
        </fieldset>
        
        <fieldset class="last">
            This site is supported by paid affiliate links. <a href="/amazon-affiliate-disclosure.html">Learn more</a>
        </fieldset>
    </div>

    <div id="main-content">
        <div class="table-wrapper">
            <table id="Generator Prices">
                <thead>
                    <tr id="powerprices-head">
                        <th>Price</th>
                        <th>Price&nbsp;/<br>&nbsp;Watt</th>
                        <th>Output<br>Wattage<br>(W)</th>
                        <th>Battery<br>Capacity<br>(Wh)</th>
                        <th>Fuel&nbsp;<br>Type</th>
                        <th>Engine&nbsp;<br>Type</th>
                        <th>Condition</th>
                        <th>Affiliate Link</th>
                    </tr>
                </thead>
                <tbody id="powerprices-body" lang="en">
                    <!-- DJI Power 1000 -->
                    <tr class="generator" data-product-key="dji-power-1000-portable" data-product-type="large_wattage" data-condition="new" data-capacity="1024" data-wattage="2200" data-fuel-type="solar" data-engine-type="electric" data-brand="other_brand" data-price="0">
                        <td class="price">N/A</td>
                        <td class="price-per-watt">N/A</td>
                        <td>2200</td>
                        <td>1024Wh</td>
                        <td>Solar</td>
                        <td>Electric</td>
                        <td>New</td>
                        <td class="name"><a href="https://amzn.to/4niyXhi" target="_blank" rel="noopener noreferrer">DJI Power 1000 Portable Power Station, 1024Wh LiFePO4 Battery, 2200W (Peak 2600W) AC/140W USB-C Output, 23db Ultra-Silent, Solar Generator For Home Backup, Camping(Solar Panel Optional)</a></td>
                    </tr>

                    <!-- BLUETTI Solar Generator -->
                    <tr class="generator" data-product-key="bluetti-ac70-768wh" data-product-type="medium_wattage" data-condition="new" data-capacity="768" data-wattage="1000" data-fuel-type="battery" data-engine-type="electric" data-brand="bulleti" data-price="0">
                        <td class="price">N/A</td>
                        <td class="price-per-watt">N/A</td>
                        <td>1000</td>
                        <td>768</td>
                        <td>Battery</td>
                        <td>Electric</td>
                        <td>New</td>
                        <td class="name"><a href="https://amzn.to/4niyXhi" target="_blank" rel="noopener noreferrer">BLUETTI Solar Generator AC70, 768Wh LiFePO4 Battery Backup w/ 2 1000W AC Outlets (Power Lifting 2000W), 100W Type-C, for Road Trip, Off-grid, Power Outage (Solar Panel Optional)</a></td>
                    </tr>

                    <!-- EF ECOFLOW Portable Power Station -->
                    <tr class="generator" data-product-key="ecoflow-river-2-pro" data-product-type="small_wattage" data-condition="new" data-capacity="768" data-wattage="800" data-fuel-type="solar" data-engine-type="electric" data-brand="ef_ecoflow" data-price="0">
                        <td class="price">N/A</td>
                        <td class="price-per-watt">N/A</td>
                        <td>800</td>
                        <td>768</td>
                        <td>Solar</td>
                        <td>Electric</td>
                        <td>New</td>
                        <td class="name"><a href="https://amzn.to/4niyXhi" target="_blank" rel="noopener noreferrer">EF ECOFLOW Portable Power Station RIVER 2 Pro, 768Wh LiFePO4 Battery, 70 Min Fast Charging, 4X300W AC Outlets, Solar Generator for Outdoor Camping/RVs/Home Use Black</a></td>
                    </tr>

                    <!-- Anker SOLIX F2000 -->
                    <tr class="generator" data-product-key="anker-solix-f2000" data-product-type="large_wattage" data-condition="new" data-capacity="767" data-wattage="2400" data-fuel-type="solar" data-engine-type="electric" data-brand="anker" data-price="0">
                        <td class="price">N/A</td>
                        <td class="price-per-watt">N/A</td>
                        <td>2400</td>
                        <td>2048</td>
                        <td>Solar</td>
                        <td>Electric</td>
                        <td>New</td>
                        <td class="name"><a href="https://amzn.to/4niyXhi" target="_blank" rel="noopener noreferrer">Anker SOLIX F2000 Portable Power Station, Powerhouse 767, 2400W Solar Generator, GaNPrime Battery Generators for Home Use, LiFePO4 Power Station for Outdoor Camping, and RVs (Solar Panel Optional)</a></td>
                    </tr>

                    <!-- Jackery Solar Generator 5000 Plus -->
                    <tr class="generator" data-product-key="jackery-5000-plus" data-product-type="large_wattage" data-condition="new" data-capacity="5040" data-wattage="7200" data-fuel-type="solar" data-engine-type="electric" data-brand="jackery" data-price="0">
                        <td class="price">N/A</td>
                        <td class="price-per-watt">N/A</td>
                        <td>7200</td>
                        <td>5040</td>
                        <td>Solar</td>
                        <td>Electric</td>
                        <td>New</td>
                        <td class="name"><a href="https://amzn.to/4niyXhi" target="_blank" rel="noopener noreferrer">Jackery Solar Generator 5000 Plus Portable Power Station with 2x 500W Solar Panels and Smart Transfer Switch, 5040Wh Power Station, 7200W AC Output Solar Generator for Home Use, Emergency Backup</a></td>
                    </tr>

                    <!-- DABBSSON 2000L Solar Generator -->
                    <tr class="generator" data-product-key="dabbsson-2000l" data-product-type="large_wattage" data-condition="new" data-capacity="2048" data-wattage="2200" data-fuel-type="solar" data-engine-type="electric" data-brand="other_brand" data-price="0">
                        <td class="price">N/A</td>
                        <td class="price-per-watt">N/A</td>
                        <td>2200</td>
                        <td>2048</td>
                        <td>Solar</td>
                        <td>Electric</td>
                        <td>New</td>
                        <td class="name"><a href="https://amzn.to/4niyXhi" target="_blank" rel="noopener noreferrer">DABBSSON 2000L Solar Generator(2025 New), 2048Wh Semi-Solid LiFePO4, 2200W AC Output&8, P-Boost 3300W, Compact&Lightweight, 1.3X Runtime, Portable Power Station for Camping/Home/RV</a></td>
                    </tr>

                    <!-- ZeroKor Portable Solar Generator -->
                    <tr class="generator" data-product-key="zerokor-300w-portable" data-product-type="small_wattage" data-condition="new" data-capacity="380" data-wattage="300" data-fuel-type="solar" data-engine-type="electric" data-brand="zerokor" data-price="0">
                        <td class="price">N/A</td>
                        <td class="price-per-watt">N/A</td>
                        <td>300</td>
                        <td>380</td>
                        <td>Solar</td>
                        <td>Electric</td>
                        <td>New</td>
                        <td class="name"><a href="https://amzn.to/4niyXhi" target="_blank" rel="noopener noreferrer">ZeroKor Portable Solar Generator, 300W Portable Power Station with Foldable 60W Solar Panel, 110V Pure Sine Wave 280Wh Lithium Battery Pack with USB DC AC Outlet for Home Use RV Van Outdoor Camping-Orange</a></td>
                    </tr>

                    <!-- GRECELL 1000W Portable Power Station -->
                    <tr class="generator" data-product-key="grecell-1000w-100w-solar-panel" data-product-type="medium_wattage" data-condition="new" data-capacity="999" data-wattage="1000" data-fuel-type="solar" data-engine-type="electric" data-brand="grecell" data-price="0">
                        <td class="price">N/A</td>
                        <td class="price-per-watt">N/A</td>
                        <td>1000</td>
                        <td>999</td>
                        <td>Solar</td>
                        <td>Electric</td>
                        <td>New</td>
                        <td class="name"><a href="https://amzn.to/4niyXhi" target="_blank" rel="noopener noreferrer">GRECELL 1000W Portable Power Station With 2x 100W Solar Panels, 999Wh Backup Lithium Battery, Pure Sine Wave AC Outlet, 60W PD Quick Charge Solar Generator Set for Outdoor Emergency Camping Travel</a></td>
                    </tr>

                    <!-- ALLPOWERS 600W Portable Power Station -->
                    <tr class="generator" data-product-key="allpowers-600w-299wh" data-product-type="small_wattage" data-condition="new" data-capacity="299" data-wattage="600" data-fuel-type="solar" data-engine-type="electric" data-brand="allpowers" data-price="0">
                        <td class="price">N/A</td>
                        <td class="price-per-watt">N/A</td>
                        <td>600</td>
                        <td>299</td>
                        <td>Solar</td>
                        <td>Electric</td>
                        <td>New</td>
                        <td class="name"><a href="https://amzn.to/4niyXhi" target="_blank" rel="noopener noreferrer">ALLPOWERS 600W Portable Power Station, 299Wh LiFePO4 Battery Backup, R600(Peak 1200w) Solar Generator, 1 Hour Full Charge Solar Power Bank, for Home Outdoor Travel Emergency RV</a></td>
                    </tr>

                    <!-- Pecron Portable Power Station E1000LFP -->
                    <tr class="generator" data-product-key="pecron-e1000lfp" data-product-type="large_wattage" data-condition="new" data-capacity="1024" data-wattage="1800" data-fuel-type="solar" data-engine-type="electric" data-brand="pecron" data-price="0">
                        <td class="price">N/A</td>
                        <td class="price-per-watt">N/A</td>
                        <td>1800</td>
                        <td>1024</td>
                        <td>Solar</td>
                        <td>Electric</td>
                        <td>New</td>
                        <td class="name"><a href="https://amzn.to/4niyXhi" target="_blank" rel="noopener noreferrer">Pecron Portable Power Station E1000LFP, 1024Wh/1800W LiFePO4 Battery Backup, Solar Generator, Expandable to 4096Wh, Fast Charging Power Station for Emergencies, Camping, RV, Home Use</a></td>
                    </tr>
					
					<tr class="generator" data-product-key="ampace-portable-power-station-andes-300-266wh-batt" data-product-type="small_wattage" data-condition="new" data-capacity="266" data-wattage="300" data-fuel-type="solar" data-engine-type="electric" data-brand="other_brand" data-price="0">
						<td class="price">N/A</td>
						<td class="price-per-watt">N/A</td>
						<td>300</td>
						<td>266Wh</td>
						<td>Solar</td>
						<td>Electric</td>
						<td>New</td>
						<td class="name"><a href="https://amzn.to/4n2c1U1" target="_blank" rel="noopener noreferrer">AMPACE Portable Power Station Andes 300, 266Wh Battery with 300W AC/100W USB-C Output, 1Hr Fast Charging, 8.2lbs Solar Generator for RV, Outdoors, Camping batteries, Traveling, (Solar Panel Optional)</a></td>
					</tr>
					<tr class="generator" data-product-key="growatt-portable-power-station-infinity-2000-black" data-product-type="large_wattage" data-condition="new" data-capacity="2048" data-wattage="2400" data-fuel-type="solar" data-engine-type="electric" data-brand="other_brand" data-price="0">
						<td class="price">N/A</td>
						<td class="price-per-watt">N/A</td>
						<td>2400</td>
						<td>2048Wh</td>
						<td>Solar</td>
						<td>Electric</td>
						<td>New</td>
						<td class="name"><a href="https://amzn.to/4nMYAaD" target="_blank" rel="noopener noreferrer">GROWATT Portable Power Station ?INFINITY 2000 Black Electric Solar Generator?2048Wh LifePO4 Battery,2400W AC Output for Home Use, Outdoor Camping, RVs and Emergency Backup(Solar Panel Optional)</a></td>
					</tr>
					<tr class="generator" data-product-key="litheli-portable-power-station-eclair-1000-1800w-s" data-product-type="large_wattage" data-condition="new" data-capacity="1069" data-wattage="1800" data-fuel-type="solar" data-engine-type="electric" data-brand="other_brand" data-price="0">
						<td class="price">N/A</td>
						<td class="price-per-watt">N/A</td>
						<td>1800</td>
						<td>1069Wh</td>
						<td>Solar</td>
						<td>Electric</td>
						<td>New</td>
						<td class="name"><a href="https://amzn.to/4n88zY8" target="_blank" rel="noopener noreferrer">Litheli Portable Power Station Eclair 1000, 1800W Solar Generator, 1069Wh Outdoor Generator, 1H Fast Charging LiFePO4 Power Station for Outdoor Camping, Emergency and RVs(Solar Panels Optional)</a></td>
					</tr>
					
                </tbody>
            </table>
        </div>

        <div style="margin-top: 30px;">
            <p id="detailed-disclosures" style="
                font-size: 12px; 
                color: #666; 
                padding: 20px; 
                background-color: #f8f9fa; 
                border-radius: 5px;
                line-height: 1.5;
                margin-bottom: 20px;
            ">
                <strong>Important Disclosures:</strong><br><br>
                
                <strong>Amazon Associate:</strong> This site is a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for sites to earn advertising fees by advertising and linking to Amazon.com.<br><br>
                
                <strong>Pricing Information:</strong> All product prices and availability are automatically updated from Amazon's Product Advertising API and are accurate as of the last update. Prices and availability are subject to change without notice. Any price displayed on Amazon at the time of purchase will govern the sale.<br><br>
                
                <strong>Commission Disclosure:</strong> As an Amazon Associate I earn from qualifying purchases. When you purchase through our affiliate links, we may earn a commission at no additional cost to you. This helps support our website and allows us to continue providing price comparisons.<br><br>
                
                <strong>Data Accuracy:</strong> While we strive to provide accurate and up-to-date information, we make no warranties about the completeness, reliability, or accuracy of this information. Product specifications, pricing, and availability can change rapidly.<br><br>
                
                <strong>Independent Research:</strong> We encourage you to verify all product information, read reviews, and compare prices before making any purchase decisions. This comparison tool is meant to assist your research, not replace it.
            </p>
            
            <p id="last-updated-info" style="
                font-size: 11px; 
                color: #888; 
                text-align: center; 
                padding: 10px;
                border-top: 1px solid #ddd;
                margin-bottom: 20px;
            ">
                Last updated: <span id="update-timestamp"></span> | Showing <span id="product-count">10</span> products
            </p>
            
            <div style="text-align: center; padding: 15px; border-top: 1px solid #eee;">
                <a href="/faq.html" style="margin: 0 15px; color: #666; text-decoration: none; font-size: 12px;">FAQ</a> | 
                <a href="/privacy-policy.html" style="margin: 0 15px; color: #666; text-decoration: none; font-size: 12px;">Privacy Policy</a> | 
                <a href="/terms-of-service.html" style="margin: 0 15px; color: #666; text-decoration: none; font-size: 12px;">Terms of Use</a> | 
                <a href="/amazon-affiliate-disclosure.html" style="margin: 0 15px; color: #666; text-decoration: none; font-size: 12px;">Amazon Affiliate Disclosure</a> | 
                <a href="/contact.html" style="margin: 0 15px; color: #666; text-decoration: none; font-size: 12px;">Contact Us</a> | 
                <a href="/about-us.html" style="margin: 0 15px; color: #666; text-decoration: none; font-size: 12px;">About Us</a>
            </div>
        </div>
    </div>
	
	<script>
// Minimal JavaScript for filtering functionality
var f = document.getElementById('filters');

function get_filters() {
    var filters = {
        category: {},
        condition: {},
        fuel_type: {},
        engine_type: {},
        brand: {},
        wattage_min: 0,
        wattage_max: null,
        capacity_min: 0,
        capacity_max: null
    };

    f.querySelectorAll('.product_type input').forEach(function(checkbox) {
        if(!filters.category[checkbox.dataset.category]) {
            filters.category[checkbox.dataset.category] = {};
        }
        filters.category[checkbox.dataset.category][checkbox.dataset.productType] = checkbox.checked;
    });

    f.querySelectorAll('.condition input').forEach(function(checkbox) {
        filters.condition[checkbox.dataset.condition] = checkbox.checked;
    });

    f.querySelectorAll('.fuel_type input').forEach(function(checkbox) {
        filters.fuel_type[checkbox.dataset.fuelType] = checkbox.checked;
    });

    f.querySelectorAll('.engine_type input').forEach(function(checkbox) {
        filters.engine_type[checkbox.dataset.engineType] = checkbox.checked;
    });

    f.querySelectorAll('.brand input').forEach(function(checkbox) {
        filters.brand[checkbox.dataset.brand] = checkbox.checked;
    });

    var wattage_min = f.querySelector('#wattage_min');
    if(wattage_min && wattage_min.value) {
        filters.wattage_min = Number(wattage_min.value);
    }

    var wattage_max = f.querySelector('#wattage_max');
    if(wattage_max && wattage_max.value) {
        filters.wattage_max = Number(wattage_max.value);
    }

    var capacity_min = f.querySelector('#capacity_min');
    if(capacity_min && capacity_min.value) {
        filters.capacity_min = Number(capacity_min.value);
    }

    var capacity_max = f.querySelector('#capacity_max');
    if(capacity_max && capacity_max.value) {
        filters.capacity_max = Number(capacity_max.value);
    }

    return filters;
}

function apply_filters() {
    var filters = get_filters();
    var rows = document.querySelectorAll('#powerprices-body .generator');
    
    rows.forEach(function(row) {
        var show = true;
        
        var condition = row.dataset.condition;
        if(!filters.condition[condition]) {
            show = false;
        }
        
        var productType = row.dataset.productType;
        if(filters.category.generator && !filters.category.generator[productType]) {
            show = false;
        }
        
        var fuelType = row.dataset.fuelType;
        if(!filters.fuel_type[fuelType]) {
            show = false;
        }
        
        var engineType = row.dataset.engineType;
        if(!filters.engine_type[engineType]) {
            show = false;
        }
        
        var brand = row.dataset.brand;
        if(!filters.brand[brand]) {
            show = false;
        }
        
        var wattage = Number(row.dataset.wattage);
        if(wattage < filters.wattage_min) {
            show = false;
        }
        if(filters.wattage_max && wattage > filters.wattage_max) {
            show = false;
        }
        
        var capacity = Number(row.dataset.capacity);
        if(capacity < filters.capacity_min) {
            show = false;
        }
        if(filters.capacity_max && capacity > filters.capacity_max) {
            show = false;
        }
        
        if(show) {
            row.classList.remove('filtered-out');
        } else {
            row.classList.add('filtered-out');
        }
    });
}

function init_filters() {
    f.addEventListener('change', function(e) {
        if(e.target.type === 'checkbox' || e.target.type === 'radio') {
            apply_filters();
        }
    });
    
    f.addEventListener('input', function(e) {
        if(e.target.type === 'number') {
            apply_filters();
        }
    });
}

// Function to calculate and update price per watt for all rows
function calculatePricePerWatt() {
    var rows = document.querySelectorAll('#powerprices-body .generator');
    
    rows.forEach(function(row) {
        var priceCell = row.querySelector('.price');
        var pricePerWattCell = row.querySelector('.price-per-watt');
        var wattage = Number(row.dataset.wattage);
        var price = Number(row.dataset.price);
        
        // Only calculate if we have valid price and wattage data
        if (price > 0 && wattage > 0) {
            var pricePerWatt = (price / wattage).toFixed(3);
            pricePerWattCell.textContent = '$' + pricePerWatt;
        } else {
            pricePerWattCell.textContent = 'N/A';
        }
    });
}

// Function to update a single product's price and recalculate
function updateProductPrice(productKey, newPrice) {
    var row = document.querySelector('[data-product-key="' + productKey + '"]');
    if (row) {
        row.dataset.price = newPrice;
        var priceCell = row.querySelector('.price');
        
        if (newPrice > 0) {
            priceCell.textContent = '$' + Number(newPrice).toFixed(2);
        } else {
            priceCell.textContent = 'N/A';
        }
        
        var pricePerWattCell = row.querySelector('.price-per-watt');
        var wattage = Number(row.dataset.wattage);
        
        if (newPrice > 0 && wattage > 0) {
            var pricePerWatt = (newPrice / wattage).toFixed(3);
            pricePerWattCell.textContent = '$' + pricePerWatt;
        } else {
            pricePerWattCell.textContent = 'N/A';
        }
    }
}

// Initialize when page loads
document.addEventListener('DOMContentLoaded', function() {
    init_filters();
	calculatePricePerWatt(); // Add this line
    
    // Set current timestamp
    var now = new Date();
    document.getElementById('update-timestamp').textContent = now.toLocaleDateString() + ' ' + now.toLocaleTimeString();
});
</script>

// Auto Price Updater for Generator Comparison Page
// Add this script to your HTML file

class PriceUpdater {
    constructor(jsonFilePath = '/api/generator-prices.json') {
        this.jsonFilePath = jsonFilePath;
        this.updateInterval = 30 * 60 * 1000; // Check every 30 minutes
        this.lastUpdateTime = null;
        this.isUpdating = false;
        
        // Start the updater when page loads
        this.init();
    }

    async init() {
        console.log('Initializing Price Updater...');
        
        // Initial price fetch
        await this.fetchAndUpdatePrices();
        
        // Set up periodic updates
        setInterval(() => {
            this.fetchAndUpdatePrices();
        }, this.updateInterval);
        
        // Also check when page becomes visible (user returns to tab)
        document.addEventListener('visibilitychange', () => {
            if (!document.hidden) {
                this.fetchAndUpdatePrices();
            }
        });
    }

    async fetchAndUpdatePrices() {
        if (this.isUpdating) {
            console.log('Update already in progress, skipping...');
            return;
        }

        this.isUpdating = true;
        
        try {
            console.log('Fetching latest prices...');
            
            const response = await fetch(this.jsonFilePath, {
                cache: 'no-cache',
                headers: {
                    'Cache-Control': 'no-cache',
                    'Pragma': 'no-cache'
                }
            });

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const data = await response.json();
            console.log('Received price data:', data);

            // Handle both single product and array of products
            const products = Array.isArray(data) ? data : [data];
            
            let updatedCount = 0;
            
            products.forEach(product => {
                if (this.updateProductPrice(product)) {
                    updatedCount++;
                }
            });

            console.log(`Updated ${updatedCount} product prices`);
            
            // Update timestamp
            this.updateTimestamp();
            
            // Recalculate price per watt for all products
            this.recalculatePricePerWatt();
            
            this.lastUpdateTime = new Date();
            
        } catch (error) {
            console.error('Error fetching prices:', error);
            this.showUpdateError();
        } finally {
            this.isUpdating = false;
        }
    }

    updateProductPrice(product) {
        // Try to find the row by ASIN first, then by product key
        let row = this.findProductRow(product);
        
        if (!row) {
            console.warn('Product row not found for:', product.title || product.asin);
            return false;
        }

        // Extract numeric price from string like "$799.00"
        const priceMatch = product.price?.match(/\$?([\d,]+\.?\d*)/);
        const numericPrice = priceMatch ? parseFloat(priceMatch[1].replace(/,/g, '')) : 0;

        // Update the row's data attribute
        row.dataset.price = numericPrice;

        // Update the price cell display
        const priceCell = row.querySelector('.price');
        if (priceCell) {
            if (numericPrice > 0 && product.price_available) {
                priceCell.textContent = product.price;
                priceCell.classList.remove('price-unavailable');
            } else {
                priceCell.textContent = 'N/A';
                priceCell.classList.add('price-unavailable');
            }
        }

        // Update other product details if they exist in the JSON
        this.updateProductDetails(row, product);

        console.log(`Updated price for ${product.title}: ${product.price}`);
        return true;
    }

    findProductRow(product) {
        // Strategy 1: Match by affiliate link (Primary method)
        if (product.affiliate_link) {
            const rows = document.querySelectorAll('#powerprices-body .generator');
            for (let row of rows) {
                const linkElement = row.querySelector('.name a');
                if (linkElement && linkElement.href === product.affiliate_link) {
                    console.log(`Found exact affiliate link match: ${product.affiliate_link}`);
                    return row;
                }
            }
            
            // If exact match fails, try to match the shortened URL part (e.g., "4nMYAaD")
            const shortCode = this.extractShortCode(product.affiliate_link);
            if (shortCode) {
                for (let row of rows) {
                    const linkElement = row.querySelector('.name a');
                    if (linkElement && linkElement.href.includes(shortCode)) {
                        console.log(`Found affiliate short code match: ${shortCode}`);
                        return row;
                    }
                }
            }
        }

        // Strategy 2: Try to match by ASIN in the affiliate link (if available)
        if (product.asin) {
            const rows = document.querySelectorAll('#powerprices-body .generator');
            for (let row of rows) {
                const linkElement = row.querySelector('a[href*="amzn.to"]');
                if (linkElement && linkElement.href.includes(product.asin)) {
                    console.log(`Found ASIN match: ${product.asin}`);
                    return row;
                }
            }
        }

        // Strategy 3: Match by specifications (wattage + capacity) - Most reliable fallback
        if (product.output_wattage && product.battery_capacity) {
            const rows = document.querySelectorAll('#powerprices-body .generator');
            for (let row of rows) {
                const wattage = row.dataset.wattage;
                const capacity = row.dataset.capacity;
                
                // Handle capacity with "Wh" suffix
                const cleanCapacity = capacity.replace(/Wh?$/i, '');
                const productCapacity = product.battery_capacity.toString().replace(/Wh?$/i, '');
                
                if (wattage === product.output_wattage && cleanCapacity === productCapacity) {
                    console.log(`Found specs match: ${product.output_wattage}W / ${productCapacity}Wh`);
                    return row;
                }
            }
        }

        // Strategy 4: Match by product title similarity (least reliable)
        if (product.title || product.link_text) {
            const searchTitle = product.link_text || product.title;
            const rows = document.querySelectorAll('#powerprices-body .generator');
            for (let row of rows) {
                const linkElement = row.querySelector('.name a');
                if (linkElement) {
                    const htmlTitle = linkElement.textContent.toLowerCase();
                    const jsonTitle = searchTitle.toLowerCase();
                    
                    // Check for significant word matches
                    if (this.calculateTitleSimilarity(htmlTitle, jsonTitle) > 0.7) {
                        console.log(`Found title similarity match: ${searchTitle.substring(0, 50)}...`);
                        return row;
                    }
                }
            }
        }

        console.warn('No matching product found for:', {
            affiliate_link: product.affiliate_link,
            title: product.title?.substring(0, 50) + '...',
            specs: `${product.output_wattage}W / ${product.battery_capacity}Wh`
        });
        
        return null;
    }

    // Helper method to extract short code from Amazon affiliate links
    extractShortCode(affiliateLink) {
        // Extract code from URLs like "https://amzn.to/4nMYAaD"
        const match = affiliateLink.match(/amzn\.to\/([A-Za-z0-9]+)/);
        return match ? match[1] : null;
    }

    calculateTitleSimilarity(title1, title2) {
        const words1 = title1.split(/\s+/).filter(w => w.length > 3);
        const words2 = title2.split(/\s+/).filter(w => w.length > 3);
        
        let matches = 0;
        for (let word1 of words1) {
            if (words2.some(word2 => word2.includes(word1) || word1.includes(word2))) {
                matches++;
            }
        }
        
        return matches / Math.max(words1.length, words2.length);
    }

    updateProductDetails(row, product) {
        // Update link if provided
        if (product.affiliate_link) {
            const linkElement = row.querySelector('.name a');
            if (linkElement) {
                linkElement.href = product.affiliate_link;
            }
        }

        // Update title if provided
        if (product.link_text || product.title) {
            const linkElement = row.querySelector('.name a');
            if (linkElement) {
                linkElement.textContent = product.link_text || product.title;
            }
        }

        // Add data attribute for last update
        row.dataset.lastUpdated = new Date().toISOString();
    }

    recalculatePricePerWatt() {
        const rows = document.querySelectorAll('#powerprices-body .generator');
        
        rows.forEach(row => {
            const pricePerWattCell = row.querySelector('.price-per-watt');
            const wattage = Number(row.dataset.wattage);
            const price = Number(row.dataset.price);
            
            if (pricePerWattCell) {
                if (price > 0 && wattage > 0) {
                    const pricePerWatt = (price / wattage).toFixed(3);
                    pricePerWattCell.textContent = '$' + pricePerWatt;
                    pricePerWattCell.classList.remove('price-unavailable');
                } else {
                    pricePerWattCell.textContent = 'N/A';
                    pricePerWattCell.classList.add('price-unavailable');
                }
            }
        });
    }

    updateTimestamp() {
        const timestampElement = document.getElementById('update-timestamp');
        if (timestampElement) {
            const now = new Date();
            timestampElement.textContent = now.toLocaleDateString() + ' ' + now.toLocaleTimeString();
        }
    }

    showUpdateError() {
        const timestampElement = document.getElementById('update-timestamp');
        if (timestampElement) {
            timestampElement.textContent = 'Error updating prices - ' + new Date().toLocaleTimeString();
            timestampElement.style.color = '#dc3545';
            
            // Reset color after 5 seconds
            setTimeout(() => {
                timestampElement.style.color = '';
            }, 5000);
        }
    }

    // Method to manually trigger an update (useful for testing)
    async forceUpdate() {
        console.log('Forcing price update...');
        await this.fetchAndUpdatePrices();
    }
}

// Enhanced CSS for price update indicators
const updateStyles = `
<style>
.price-unavailable {
    color: #6c757d;
    font-style: italic;
}

.price-updated {
    background-color: #d4edda;
    transition: background-color 2s ease-out;
}

.update-indicator {
    position: fixed;
    top: 10px;
    right: 10px;
    background-color: #007bff;
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 12px;
    z-index: 1000;
    display: none;
}

.update-indicator.show {
    display: block;
}

.update-indicator.error {
    background-color: #dc3545;
}

@media (max-width: 768px) {
    .update-indicator {
        position: relative;
        top: auto;
        right: auto;
        margin-bottom: 10px;
        text-align: center;
    }
}
</style>
`;

// Initialize the price updater when the page loads
document.addEventListener('DOMContentLoaded', function() {
    // Add update indicator styles
    document.head.insertAdjacentHTML('beforeend', updateStyles);
    
    // Add update indicator HTML
    const indicator = document.createElement('div');
    indicator.id = 'update-indicator';
    indicator.className = 'update-indicator';
    document.body.appendChild(indicator);
    
    // Initialize the price updater
    // Change the path to match your JSON file location
    window.priceUpdater = new PriceUpdater('/api/generator-prices.json');
    
    // Expose manual update function to console for testing
    window.updatePrices = () => window.priceUpdater.forceUpdate();
    
    console.log('Price updater initialized. You can manually trigger updates by calling updatePrices() in the console.');
});

// Optional: Handle multiple products in a single JSON file
// If your JSON file contains an array of products, the script will handle it automatically
// If you need to handle multiple JSON files, you can extend the PriceUpdater class:

/*
class MultiFilePriceUpdater extends PriceUpdater {
    constructor(jsonFilePaths = ['/api/generator-prices.json']) {
        super();
        this.jsonFilePaths = Array.isArray(jsonFilePaths) ? jsonFilePaths : [jsonFilePaths];
    }

    async fetchAndUpdatePrices() {
        if (this.isUpdating) return;
        this.isUpdating = true;
        
        try {
            for (const filePath of this.jsonFilePaths) {
                const response = await fetch(filePath, { cache: 'no-cache' });
                const data = await response.json();
                const products = Array.isArray(data) ? data : [data];
                
                products.forEach(product => this.updateProductPrice(product));
            }
            
            this.updateTimestamp();
            this.recalculatePricePerWatt();
            
        } catch (error) {
            console.error('Error fetching prices:', error);
            this.showUpdateError();
        } finally {
            this.isUpdating = false;
        }
    }
}
*/

</body>
</html>